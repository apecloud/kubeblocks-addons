apiVersion: apps.kubeblocks.io/v1alpha1
kind: ComponentVersion
metadata:
  name: rabbitmq
  labels:
    {{- include "rabbitmq.labels" . | nindent 4 }}
spec:
  compatibilityRules:
    - compDefs:
        - {{ include "rabbitmq.componentDefName" . }}
      releases:
        - 4.2.1
        - 4.1.6
        - 4.0.9
        - 3.13.7
        - 3.12.14
        - 3.11.28
        - 3.10.25
        - 3.9.29
        - 3.8.34
  releases:
    - name: 4.2.1
      changes:
      serviceVersion: 4.2.1
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.2.1-management
    - name: 4.1.6
      changes:
      serviceVersion: 4.1.6
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.1.6-management
    - name: 4.0.9
      changes:
      serviceVersion: 4.0.9
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.0.9-management
    - name: 3.13.7
      changes:
      serviceVersion: 3.13.7
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:3.13.7-management
    - name: 3.12.14
      changes:
      serviceVersion: 3.12.14
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:3.12.14-management
    - name: 3.11.28
      changes:
      serviceVersion: 3.11.28
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:3.11.28-management
    - name: 3.10.25
      changes:
      serviceVersion: 3.10.25
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:3.10.25-management
    - name: 3.9.29
      changes:
      serviceVersion: 3.9.29
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:3.9.29-management
    - name: 3.8.34
      changes:
      serviceVersion: 3.8.34
      images:
        rabbitmq: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:3.8.34-management
