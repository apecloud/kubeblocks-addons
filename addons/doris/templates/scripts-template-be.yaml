apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "be.scriptsTemplate" . }}
  labels:
    {{- include "doris.labels" . | nindent 4 }}
data:
  be_prestop.sh: |-
    {{- .Files.Get "scripts/be/be_prestop.sh" | nindent 4 }}
  entry_point.sh: |-
    {{- .Files.Get "scripts/be/entry_point.sh" | nindent 4 }}
  init_be.sh: |-
    {{- .Files.Get "scripts/be/init_be.sh" | nindent 4 }}
  be-update-dynamic-config.sh: |
    #!/bin/sh
    set -ex
    key="${1:?missing parameterkey}"
    value="${2:?missing parametervalue}"
    echo "key: $key, value: $value"
    curl -XPOST http://localhost:8040/api/update_config?$key=$value