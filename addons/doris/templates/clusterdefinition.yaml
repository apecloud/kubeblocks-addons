apiVersion: apps.kubeblocks.io/v1
kind: ClusterDefinition
metadata:
  name: {{ include "doris.name" . }}
  labels:
    {{- include "doris.labels" . | nindent 4 }}
  annotations:
    {{- include "doris.apiVersion" . | nindent 4 }}
spec:
  topologies:
  - name: aggregated
    components:
    - name: fe
      compDef: {{ include "fe.cmpdRegexPattern" . }}
    - name: be
      compDef: {{ include "be.cmpdRegexPattern" . }}
    orders:
      provision:
      - fe
      - be
      terminate:
      - be
      - fe

