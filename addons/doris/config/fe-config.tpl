
{{- $phy_memory := getContainerMemory ( index $.podSpec.containers 0 ) }}
{{- $heap_size := mul (div $phy_memory 10) 8 }}

JAVA_OPTS="-Xmx{{ $heap_size }} -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:/opt/apache-doris/fe/log/fe.gc.log.$DATE"

{{- if eq (index $ "TLS_ENABLED") "true" }}
# tls
enable_ssl=true
mysql_ssl_default_ca_certificate=/opt/apache-doris/fe/mysql_ssl_default_certificate/ca_certificate.p12
mysql_ssl_default_ca_certificate_password=doris
mysql_ssl_default_server_certificate=/opt/apache-doris/fe/mysql_ssl_default_certificate/server_certificate.p12
mysql_ssl_default_server_certificate_password=doris
{{- end }}

abort_txn_after_lost_heartbeat_time_second=300
access_control_allowed_origin_domain=*
access_controller_type=default
agent_task_resend_wait_time_ms=5000
allow_replica_on_same_host=false
alter_table_timeout_second=2592000
analyze_record_limit=20000
arrow_flight_sql_port=-1
arrow_flight_token_alive_time=4320
arrow_flight_token_cache_size=512
async_loading_load_task_pool_size=10
async_pending_load_task_pool_size=10
async_task_consumer_thread_num=64
async_task_queen_size=1024
audit_event_log_queue_size=250000
audit_log_delete_age=30d
audit_log_dir=/opt/apache-doris/fe/log
audit_log_enable_compress=false
audit_log_roll_interval=DAY
audit_log_roll_num=90
audit_sys_accumulated_file_size=4
authentication_type=default
auto_analyze_simultaneously_running_task_num=1
auto_check_statistics_in_minutes=5
autobucket_max_buckets=128
autobucket_min_buckets=1
backend_load_capacity_coeficient=-1.0
backend_proxy_num=48
backend_rpc_timeout_ms=60000
backup_job_default_timeout_ms=86400000
backup_plugin_path=/tools/trans_file_tool/trans_files.sh
backup_upload_task_num_per_be=3
balance_be_then_disk=true
balance_load_score_threshold=0.1
balance_slot_num_per_path=1
bdbje_file_logging_level=INFO
bdbje_free_disk_bytes=1073741824
bdbje_heartbeat_timeout_second=30
bdbje_lock_timeout_second=5
bdbje_replica_ack_timeout_second=10
bdbje_reserved_disk_bytes=1073741824
be_exec_version=5
be_rebalancer_fuzzy_test=false
be_rebalancer_idle_seconds=0
be_report_query_statistics_timeout_ms=60000
blacklist_duration_second=120
broker_load_default_timeout_second=14400
broker_timeout_ms=10000
cache_enable_partition_mode=true
cache_enable_sql_mode=true
cache_last_version_interval_second=30
cache_result_max_data_size=31457280
cache_result_max_row_count=3000
capacity_used_percent_high_water=0.75
catalog_trash_expire_second=86400
catalog_trash_ignore_min_erase_latency=false
catalog_try_lock_timeout_ms=5000
cbo_concurrency_statistics_task_num=10
cbo_default_sample_percentage=10
cbo_max_statistics_job_num=20
check_consistency_default_timeout_second=600
check_java_version=true
check_table_lock_leaky=false
check_wal_queue_timeout_threshold=180000
cloud_cluster_check_interval_second=10
cloud_cold_read_percent=10
cloud_meta_service_rpc_failed_retry_times=200
cloud_replica_num=3
cloud_sql_server_cluster_id=RESERVED_CLUSTER_ID_FOR_SQL_SERVER
cloud_sql_server_cluster_name=RESERVED_CLUSTER_NAME_FOR_SQL_SERVER
cluster_id=-1
colocate_group_relocate_delay_second=1800
commit_timeout_second=30
consistency_check_end_time=23
consistency_check_start_time=23
cpu_resource_limit_per_analyze_task=1
create_tablet_round_robin_from_start=false
custom_config_dir=/opt/apache-doris/fe/conf
db_used_data_quota_update_interval_secs=300
deadlock_detection_interval_minute=5
decommission_tablet_check_threshold=5000
decommission_tablet_wait_time_seconds=3600
default_db_data_quota_bytes=1125899906842624
default_db_max_running_txn_num=-1
default_db_replica_quota_size=1073741824
default_get_version_from_ms_timeout_second=3
default_load_parallelism=8
default_max_filter_ratio=0.0
default_max_query_instances=-1
default_schema_change_scheduler_interval_millisecond=500
default_storage_medium=HDD
delete_job_max_timeout_second=300
desired_max_waiting_jobs=100
diagnose_balance_max_tablet_num_diff=50
diagnose_balance_max_tablet_num_ratio=1.1
disable_backend_black_list=false
disable_balance=false
disable_colocate_balance=false
disable_colocate_balance_between_groups=false
disable_datev1=true
disable_decimalv2=true
disable_disk_balance=false
disable_hadoop_load=false
disable_load_job=false
disable_local_deploy_manager_drop_node=true
disable_mini_load=true
disable_show_stream_load=false
disable_storage_medium_check=false
disable_tablet_scheduler=false
disallow_create_catalog_with_resource=true
div_precision_increment=4
dpp_bytes_per_reduce=104857600
dpp_config_str={palo-dpp : {hadoop_palo_path : '/dir',hadoop_configs : 'fs.default.name=hdfs://host:port;mapred.job.tracker=host:port;hadoop.job.ugi=user,password'}}
dpp_default_cluster=palo-dpp
dpp_default_config_str={hadoop_configs : 'mapred.job.priority=NORMAL;mapred.job.map.capacity=50;mapred.job.reduce.capacity=50;mapred.hce.replace.streaming=false;abaci.long.stored.job=true;dce.shuffle.enable=false;dfs.client.authserver.force_stop=true;dfs.client.auth.method=0'}
dpp_hadoop_client_path=/lib/hadoop-client/hadoop/bin/hadoop
drop_backend_after_decommission=true
drop_rpc_retry_num=200
dynamic_partition_check_interval_seconds=600
dynamic_partition_enable=true
edit_log_port=9010
edit_log_roll_num=50000
edit_log_type=bdb
enable_access_file_without_broker=false
enable_alter_queue_prop_sync=false
enable_array_type=false
enable_batch_delete_by_default=true
enable_bdbje_debug_mode=false
enable_cloud_multi_replica=false
enable_cloud_snapshot_version=true
enable_collect_internal_query_profile=false
enable_concurrent_update=false
enable_convert_light_weight_schema_change=false
enable_cooldown_replica_affinity=true
enable_create_bitmap_index_as_inverted_index=true
enable_create_hive_bucket_table=false
enable_date_conversion=true
enable_deadlock_detection=false
enable_debug_points=false
enable_decimal_conversion=true
enable_delete_existing_files=false
enable_deploy_manager=disable
enable_disk_balance_for_single_replica=false
enable_file_logger=true
enable_force_drop_redundant_replica=false
enable_get_log_file_api=false
enable_hidden_version_column_by_default=true
enable_hms_events_incremental_sync=false
enable_http_server_v2=true
enable_java_udf=true
enable_job_schedule_second_for_test=false
enable_local_replica_selection=false
enable_local_replica_selection_fallback=false
enable_metric_calculator=true
enable_mow_light_delete=false
enable_multi_tags=false
enable_odbc_mysql_broker_table=false
enable_outfile_to_local=false
enable_pipeline_load=true
enable_profile_when_analyze=false
enable_proxy_protocol=false
enable_quantile_state_type=true
enable_query_hit_stats=false
enable_query_hive_views=true
enable_query_queue=true
enable_round_robin_create_tablet=true
enable_storage_policy=true
enable_sts_vpc=true
enable_token_check=true
enable_urgent_balance_no_low_backend=true
es_state_sync_interval_second=10
enable_all_http_auth=false
enable_cpu_hard_limit=false
enable_feature_binlog=false
enable_fqdn_mode=true
enable_https=false
enable_mtmv=false
enable_nereids_load=false
enable_single_replica_load=false
enable_workload_group=true
max_binlog_messsage_size=1073741824
min_tablets_for_dup_table_shuffle=64
sql_cache_manage_num=100
expire_sql_cache_in_fe_second=300
expr_children_limit=10000
expr_depth_limit=3000
external_cache_expire_time_minutes_after_access=10
fetch_stream_load_record_interval_second=120
finish_job_max_saved_second=259200
finished_job_cleanup_threshold_time_hour=24
fix_tablet_partition_id_eq_0=false
forbid_running_alter_job=false
force_do_metadata_checkpoint=false
force_olap_table_replication_num=0
force_sqlserver_jdbc_encrypt_false=false
get_be_resource_usage_interval_ms=10000
group_commit_data_bytes_default_value=134217728
group_commit_interval_ms_default_value=10000
grpc_keep_alive_second=10
grpc_max_message_size_bytes=2147483647
grpc_threadmgr_threads_nums=4096
hadoop_load_default_timeout_second=259200
heartbeat_interval_second=10
heartbeat_mgr_blocking_queue_size=1024
heartbeat_mgr_threads_num=8
history_job_keep_max_second=604800
hive_default_file_format=orc
hive_metastore_client_timeout_second=10
hive_stats_partition_sample_size=30
hms_events_batch_size_per_rpc=500
hms_events_polling_interval_ms=10000
http_load_submitter_max_worker_threads=2
http_port=8030
http_sql_submitter_max_worker_threads=2
https_port=8050
ignore_backup_not_support_table_type=false
ignore_bdbje_log_checksum_read=false
ignore_meta_check=false
ignore_unknown_metadata_module=false
info_sys_accumulated_file_size=4
insert_load_default_timeout_second=14400
inverted_index_storage_format=V1
jdbc_driver_secure_path=*
jdbc_drivers_dir=/opt/apache-doris/fe/jdbc_drivers
jdbc_mysql_unsupported_pushdown_functions=[date_trunc, money_format, negative]
jetty_server_acceptors=2
jetty_server_max_http_header_size=1048576
jetty_server_max_http_post_size=104857600
jetty_server_selectors=4
jetty_server_workers=0
jetty_threadPool_maxThreads=400
jetty_threadPool_minThreads=20
job_dispatch_timer_job_queue_size=1024
job_dispatch_timer_job_thread_num=2
job_insert_task_consumer_thread_num=10
job_mtmv_task_consumer_thread_num=10
keep_scheduler_mtmv_task_when_job_deleted=false
key_store_alias=doris_ssl_certificate
key_store_path=/opt/apache-doris/fe/conf/ssl/doris_ssl_certificate.keystore
key_store_type=JKS
label_clean_interval_second=3600
label_keep_max_second=259200
label_num_threshold=2000
label_regex_length=128
ldap_admin_name=cn=admin,dc=domain,dc=com
ldap_authentication_enabled=false
ldap_cache_timeout_day=30
ldap_group_basedn=ou=group,dc=domain,dc=com
ldap_host=127.0.0.1
ldap_pool_max_active=8
ldap_pool_max_idle=8
ldap_pool_max_total=-1
ldap_pool_max_wait=-1
ldap_pool_min_idle=0
ldap_pool_test_on_borrow=false
ldap_pool_test_on_return=false
ldap_pool_test_while_idle=false
ldap_pool_when_exhausted=1
ldap_port=389
ldap_user_basedn=ou=people,dc=domain,dc=com
ldap_user_cache_timeout_s=43200
ldap_user_filter=(&(uid={login}))
load_checker_interval_second=5
locale=zh_CN.UTF-8
lock_reporting_threshold_ms=500
log_roll_size_mb=1024
log_rollover_strategy=age
lower_case_table_names=1
manual_drop_replica_valid_second=86400
master_sync_policy=SYNC
max_agent_task_threads_num=4096
max_allowed_in_element_num_of_delete=1024
max_auto_partition_num=2000
max_backend_heartbeat_failure_tolerance_count=1
max_backup_restore_job_num_per_db=10
max_backup_tablets_per_job=300000
max_balancing_tablets=100
max_bdbje_clock_delta_ms=5000
max_be_exec_version=5
max_broker_concurrency=10
max_bytes_per_broker_scanner=536870912000
max_bytes_sync_commit=67108864
max_cbo_statistics_task_timeout_sec=300
max_clone_task_timeout_sec=7200
max_create_table_timeout_second=3600
max_distribution_pruner_recursion_depth=100
max_dynamic_partition_num=500
max_error_tablet_of_broker_load=3
max_external_cache_loader_thread_pool_size=64
max_external_file_cache_num=10000
max_external_schema_cache_num=10000
max_external_table_cache_num=1000
max_external_table_row_count_cache_num=100000
max_get_kafka_meta_timeout_second=60
max_hive_list_partition_num=-1
max_hive_partition_cache_num=10000
max_hive_partition_table_cache_num=1000
max_load_timeout_second=259200
max_lock_hold_threshold_seconds=10
max_meta_object_cache_num=1000
max_multi_partition_num=4096
max_mysql_service_task_threads_num=4096
max_pending_mtmv_scheduler_task_num=100
max_persistence_task_count=100
max_point_query_retry_time=2
max_query_profile_num=100
max_query_retry_time=3
max_remote_file_system_cache_num=100
max_replica_count_when_schema_change=100000
max_replication_num_per_tablet=32767
max_routine_load_job_num=100
max_routine_load_task_concurrent_num=256
max_routine_load_task_num_per_be=1024
max_running_mtmv_scheduler_task_num=100
max_running_rollup_job_num_per_table=1
max_running_txn_num_per_db=1000
max_same_name_catalog_trash_num=3
max_scheduling_tablets=2000
max_small_file_number=100
max_small_file_size_bytes=1048576
max_stream_load_record_size=5000
max_stream_load_timeout_second=259200
max_sync_task_threads_num=10
max_tolerable_backend_down_num=0
max_unfinished_load_job=1000
maximum_number_of_export_partitions=2000
maximum_parallelism_of_export_job=50
maximum_tablets_of_outfile_in_export=10
meta_delay_toleration_second=300
meta_dir=/opt/apache-doris/fe/doris-meta
meta_publish_timeout_ms=1000
meta_service_connection_age_base_minutes=5
meta_service_connection_pool_size=20
meta_service_connection_pooled=true
meta_service_rpc_retry_times=200
metadata_checkpoint_memory_threshold=70
min_backend_num_for_external_table=-1
min_be_exec_version=0
min_bytes_indicate_replica_too_large=2147483648
min_bytes_per_broker_scanner=67108864
min_bytes_sync_commit=15728640
min_clone_task_timeout_sec=180
min_create_table_timeout_second=30
min_load_replica_num=-1
min_load_timeout_second=1
min_replication_num_per_tablet=1
min_sync_commit_size=10000
min_version_count_indicate_replica_compaction_too_slow=200
multi_partition_name_prefix=p_
mysql_load_in_memory_record=20
mysql_load_thread_pool=4
mysql_nio_backlog_num=1024
mysql_service_io_threads_num=4

mysqldb_replace_name=mysql
nereids_trace_log_dir=/opt/apache-doris/fe/log/nereids_trace
partition_info_update_interval_secs=60
partition_rebalance_max_moves_num_per_selection=10
partition_rebalance_move_expire_after_access=600
period_analyze_simultaneously_running_task_num=
period_of_auto_resume_min=10
plugin_dir=/opt/apache-doris/fe/plugins
plugin_enable=true
point_query_timeout_ms=10000
prefer_compute_node_for_external_table=false
proxy_auth_enable=false
proxy_auth_magic_prefix=x@8
publish_fail_log_interval_second=300
publish_topic_info_interval_ms=30000
publish_version_check_alter_replica=true
publish_version_interval_ms=10
publish_version_timeout_second=30
publish_wait_time_second=300
pull_request_id=0
qe_max_connection=1024
qe_slow_log_ms=5000
query_audit_log_timeout_ms=5000
query_colocate_join_memory_limit_penalty_factor=1
query_metadata_name_ids_timeout=3
query_port=9030
query_queue_by_be_used_memory=-1.0
query_queue_update_interval_ms=5000
ranger_cache_size=10000
recover_with_empty_tablet=false
remote_fragment_exec_timeout_ms=30000
repair_slow_replica=false
replica_ack_policy=SIMPLE_MAJORITY
replica_sync_policy=SYNC
report_queue_size=100
restore_download_task_num_per_be=3
rpc_port=9020
schedule_batch_size=50
schedule_slot_num_per_hdd_path=4
schedule_slot_num_per_ssd_path=8
scheduler_mtmv_job_expired=86400
scheduler_mtmv_task_expired=86400
show_details_for_unaccessible_tablet=true
skip_compaction_slower_replica=true
skip_localhost_auth_check=true
small_file_dir=/opt/apache-doris/fe/small_files
spark_dpp_version=1.2-SNAPSHOT
spark_home_default_dir=/opt/apache-doris/fe/lib/spark2x
spark_launcher_log_dir=/opt/apache-doris/fe/log/spark_launcher_log
spark_load_checker_interval_second=60
spark_load_default_timeout_second=86400
split_assigner_max_split_num_variance=1
split_assigner_min_consistent_hash_candidate_num=2
split_assigner_min_random_candidate_num=2
split_assigner_optimized_local_scheduling=true
split_assigner_virtual_node_number=256
ssl_force_client_auth=false
ssl_trust_store_type=PKCS12
statistics_simultaneously_running_task_num=3
statistics_sql_mem_limit_in_bytes=2147483648
statistics_sql_parallel_exec_instance_num=1
stats_cache_size=500000
storage_flood_stage_left_capacity_bytes=1073741824
storage_flood_stage_usage_percent=95
storage_high_watermark_usage_percent=85
storage_min_left_capacity_bytes=2147483648
stream_load_default_memtable_on_sink_node=false
stream_load_default_precommit_timeout_second=3600
stream_load_default_timeout_second=259200
streaming_label_keep_max_second=43200
sts_duration=3600
sync_checker_interval_second=5
sync_commit_interval_second=10
sync_image_timeout_second=300
sys_log_delete_age=7d
sys_log_dir=/opt/apache-doris/fe/log
sys_log_enable_compress=false
sys_log_level=INFO
sys_log_mode=NORMAL
sys_log_roll_interval=DAY
sys_log_roll_num=10
sys_log_verbose_modules=
table_name_length_limit=64
tablet_checker_interval_ms=20000
tablet_create_timeout_second=2
tablet_delete_timeout_second=2
tablet_further_repair_max_times=5
tablet_further_repair_timeout_second=1200
tablet_rebalancer_type=BeLoad
tablet_recent_load_failed_second=1800
tablet_repair_delay_factor_second=60
tablet_schedule_high_priority_second=1800
tablet_schedule_interval_ms=1000
tablet_stat_update_interval_second=60
thrift_backlog_num=1024
thrift_client_timeout_ms=0
thrift_max_frame_size=16384000
thrift_max_message_size=104857600
thrift_server_max_worker_threads=4096
thrift_server_type=THREAD_POOL
tmp_dir=/opt/apache-doris/fe/temp_dir
token_generate_period_hour=12
token_queue_size=6
transaction_clean_interval_second=30
txn_rollback_limit=100
urgent_balance_disk_usage_extra_threshold=0.05
urgent_balance_pick_large_disk_usage_percentage=80
urgent_balance_pick_large_tablet_num_threshold=1000.0
urgent_balance_shuffle_large_tablet_percentage=1
use_compact_thrift_rpc=true
use_fuzzy_session_variable=false
use_mysql_bigint_for_largeint=false
use_new_tablet_scheduler=true
used_capacity_percent_max_diff=0.3
valid_version_count_delta_ratio_between_replicas=0.5
wait_internal_group_commit_finish=false
warn_sys_accumulated_file_size=2
with_k8s_certs=false
workload_group_max_num=15
workload_max_action_num_in_policy=5
workload_max_condition_num_in_policy=5
workload_max_policy_num=25
workload_runtime_status_thread_interval_ms=2000
workload_sched_policy_interval_ms=10000
yarn_client_path=/opt/apache-doris/fe/lib/yarn-client/hadoop/bin/yarn
yarn_config_dir=/opt/apache-doris/fe/lib/yarn-config
