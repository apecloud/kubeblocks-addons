{{- $phy_memory := getContainerMemory ( index $.podSpec.containers 0 ) }}

{{- if le $phy_memory 2147483648 }}
JAVA_OPTS="-Xmx1024m -Xloggc:/opt/apache-doris/log/be.gc.log.${CUR_DATE} -Dsun.java.command=DorisBE -XX:-CriticalJNINatives"
{{- else if le $phy_memory 8589934592 }}
JAVA_OPTS="-Xmx2048m -Xloggc:/opt/apache-doris/log/be.gc.log.${CUR_DATE} -Dsun.java.command=DorisBE -XX:-CriticalJNINatives"
{{- else }}
JAVA_OPTS="-Xmx4096m -Xloggc:/opt/apache-doris/log/be.gc.log.${CUR_DATE} -Dsun.java.command=DorisBE -XX:-CriticalJNINatives"
{{- end}}

LZ4_HC_compression_level=9
agent_task_trace_threshold_sec=2
allow_invalid_decimalv2_literal=0
allow_zero_date=0
alter_index_worker_count=3
alter_tablet_worker_count=3
arrow_flight_result_sink_buffer_size_rows=32768
arrow_flight_sql_port=-1
async_file_cache_init_file_num_interval=1000
async_file_cache_init_sleep_interval_ms=20
auto_inc_fetch_thread_num=3
auto_inc_low_water_level_mark_size_ratio=3
auto_inc_prefetch_size_ratio=10
aws_log_level=0
base_compaction_dup_key_max_file_size_mbytes=1024
base_compaction_max_compaction_score=20
base_compaction_min_data_ratio=0.3
base_compaction_min_rowset_num=5
base_compaction_trace_threshold=60
be_node_role=mix
be_port=9060
be_service_threads=64
big_column_size_buffer=65535
bitmap_serialize_version=1
broken_storage_path=
brpc_heavy_work_pool_max_queue_size=-1
brpc_heavy_work_pool_threads=-1
brpc_idle_timeout_sec=-1
brpc_light_work_pool_max_queue_size=-1
brpc_light_work_pool_threads=-1
brpc_max_body_size=3147483648
brpc_num_threads=256
brpc_port=8060
brpc_socket_max_unwritten_bytes=-1
brpc_streaming_client_batch_bytes=262144
buffered_reader_read_timeout_ms=600000
ca_cert_file_paths=/etc/pki/tls/certs/ca-bundle.crt;/etc/ssl/certs/ca-certificates.crt;/etc/ssl/ca-bundle.pem
cache_periodic_prune_stale_sweep_sec=300
cache_prune_interval_sec=10
calc_delete_bitmap_max_thread=32
check_consistency_worker_count=1
check_segment_when_build_rowset_meta=0
clean_stream_load_record_interval_secs=1800
clear_file_cache=0
clear_transaction_task_worker_count=1
clone_worker_count=3
cluster_id=-1
cold_data_compaction_interval_sec=1800
cold_data_compaction_thread_num=2
column_dictionary_key_ratio_threshold=0
column_dictionary_key_size_threshold=0
common_obj_lru_cache_stale_sweep_time_sec=900
compaction_batch_size=-1
compaction_keep_invisible_version_max_count=500
compaction_keep_invisible_version_min_count=50
compaction_keep_invisible_version_timeout_sec=1800
compaction_memory_bytes_limit=1073741824
compaction_min_size_mbytes=64
compaction_promotion_min_size_mbytes=128
compaction_promotion_ratio=0.05
compaction_promotion_size_mbytes=1024
compaction_promotion_version_count=1000
compaction_task_num_per_disk=4
compaction_task_num_per_fast_disk=8
confirm_unused_remote_files_interval_sec=60
cooldown_thread_num=5
crash_in_alloc_large_memory_bytes=-1
create_tablet_worker_count=3
cumulative_compaction_max_deltas=1000
cumulative_compaction_max_deltas_factor=10
cumulative_compaction_min_deltas=5
cumulative_compaction_rounds_for_each_base_compaction_round=9
cumulative_compaction_trace_threshold=10
custom_config_dir=/opt/apache-doris/be/conf
data_page_cache_stale_sweep_time_sec=300
debug_inverted_index_compaction=0
default_num_rows_per_column_file_block=1024
default_rowset_type=BETA
delete_bitmap_agg_cache_capacity=104857600
delete_bitmap_agg_cache_stale_sweep_time_sec=1800
delete_bitmap_dynamic_agg_cache_limit=0.5%
delete_worker_count=3
disable_auto_compaction=0
disable_compaction_trace_log=1
disable_memory_gc=0
disable_pk_storage_page_cache=0
disable_segment_cache=0
disable_storage_page_cache=0
disable_storage_row_cache=1
disk_stat_monitor_interval=5
doris_blocking_priority_queue_wait_timeout_ms=500
doris_cgroup_cpu_path=
doris_enable_scanner_thread_pool_per_disk=1
doris_max_remote_scanner_thread_pool_thread_num=-1
doris_max_scan_key_num=48
doris_remote_scanner_thread_pool_queue_size=102400
doris_remote_scanner_thread_pool_thread_num=48
doris_scan_block_max_mb=67108864
doris_scan_range_max_mb=1024
doris_scan_range_row_count=524288
doris_scanner_min_thread_pool_thread_num=8
doris_scanner_queue_size=1024
doris_scanner_row_bytes=10485760
doris_scanner_row_num=16384
doris_scanner_thread_pool_queue_size=102400
doris_scanner_thread_pool_thread_num=48
double_resize_threshold=23
download_binlog_rate_limit_kbs=0
download_low_speed_limit_kbps=50
download_low_speed_time=300
download_worker_count=1
drop_tablet_worker_count=3
dwarf_location_info_mode=FAST
enable_all_http_auth=0
enable_base_compaction_idle_sched=1
enable_brpc_stream_write_background=1
enable_column_type_check=1
enable_compaction_checksum=0
enable_compaction_priority_scheduling=1
enable_debug_log_timeout_secs=0
enable_debug_points=0
enable_delete_when_cumu_compaction=0
enable_feature_binlog=0
enable_file_cache=0
enable_file_cache_query_limit=0
enable_file_logger=1
enable_flush_file_cache_async=1
enable_fuzzy_mode=0
enable_https=0
enable_index_apply_preds_except_leafnode_of_andnode=1
enable_inverted_index_cache_check_timestamp=1
enable_java_support=1
enable_je_purge_dirty_pages=1
enable_jvm_monitor=0
enable_low_cardinality_cache_code=1
enable_low_cardinality_optimize=1
enable_memory_orphan_check=1
enable_merge_on_write_correctness_check=1
enable_metric_calculator=1
enable_missing_rows_correctness_check=0
enable_ordered_data_compaction=1
enable_parquet_page_index=0
enable_pipeline_task_leakage_detect=0
enable_query_like_bloom_filter=1
enable_query_memory_overcommit=1
enable_rowid_conversion_correctness_check=0
enable_segcompaction=1
enable_set_in_bitmap_value=0
enable_shrink_memory=0
enable_simdjson_reader=1
enable_single_replica_load=1
enable_skip_tablet_compaction=1
enable_snapshot_action=0
enable_stream_load_record=0
enable_system_metrics=1
enable_time_lut=1
enable_token_check=1
enable_use_cgroup_memory_info=1
enable_vertical_compaction=1
enable_vertical_segment_writer=1
enable_workload_group_for_scan=0
enable_workload_group_memory_gc=1
enable_write_index_searcher_cache=1
es_http_timeout_ms=5000
es_scroll_keepalive=5m
estimated_mem_per_column_reader=1024
exchange_sink_ignore_eovercrowded=1
exchg_buffer_queue_capacity_factor=64
exchg_node_buffer_size_bytes=20485760
exit_on_exception=0
external_table_connect_timeout_sec=30
fe_expire_duration_seconds=60
fetch_remote_schema_rpc_timeout_ms=60000
fetch_rpc_timeout_seconds=30
file_cache_max_evict_num_per_round=5000
file_cache_max_file_reader_cache_size=1000000
file_cache_max_file_segment_size=4194304
file_cache_min_file_segment_size=1048576
file_cache_path=
file_cache_wait_sec_after_fail=0
finished_migration_tasks_size=10000
flush_thread_num_per_store=6
fragment_pool_queue_size=4096
fragment_pool_thread_num_max=2048
fragment_pool_thread_num_min=64
function_service_protocol=h2:grpc
garbage_sweep_batch_size=100
generate_compaction_tasks_interval_ms=10
generate_cooldown_task_interval_sec=20
generate_tablet_meta_checkpoint_tasks_interval_secs=600
get_stack_trace_tool=libunwind
grace_shutdown_wait_seconds=120
group_commit_insert_threads=10
group_commit_memory_rows_for_max_filter_ratio=10000
group_commit_queue_mem_limit=67108864
group_commit_relay_wal_threads=10
group_commit_replay_wal_retry_interval_max_seconds=1800
group_commit_replay_wal_retry_interval_seconds=5
group_commit_replay_wal_retry_num=10
group_commit_wait_replay_wal_finish=0
group_commit_wal_max_disk_limit=10%
group_commit_wal_path=
hash_table_double_grow_degree=31
heartbeat_service_port=9050
heartbeat_service_thread_count=1
hide_webserver_config_page=0
high_disk_avail_level_diff_usages=0.15
high_priority_flush_thread_num_per_store=6
hive_sink_max_file_size=1073741824
iceberg_sink_max_file_size=1073741824
ignore_always_true_predicate_for_segment=1
ignore_broken_disk=0
ignore_invalid_partition_id_rowset_num=0
ignore_load_tablet_failure=0
ignore_not_found_file_in_external_table=1
ignore_rowset_stale_unconsistent_delete=0
ignore_schema_change_check=0
in_memory_file_size=1048576
index_cache_entry_stay_time_after_lookup_s=1800
index_page_cache_percentage=10
index_page_cache_stale_sweep_time_sec=600
ingest_binlog_work_pool_size=-1
inverted_index_cache_stale_sweep_time_sec=600
inverted_index_compaction_enable=0
inverted_index_dict_path=/opt/apache-doris/be/dict
inverted_index_fd_number_limit_percent=40
inverted_index_max_buffered_docs=-1
inverted_index_query_cache_limit=10%
inverted_index_query_cache_shards=256
inverted_index_ram_buffer_size=512
inverted_index_ram_dir_enable=1
inverted_index_read_buffer_size=4096
inverted_index_searcher_cache_limit=10%
jdbc_connection_pool_cache_clear_time_sec=28800
jdbc_drivers_dir=/opt/apache-doris/be/jdbc_drivers
je_dirty_pages_mem_limit_percent=5%
jeprofile_dir=/opt/apache-doris/be/log
jsonb_type_length_soft_limit_bytes=1048576
kafka_api_version_request=true
kafka_broker_version_fallback=0.10.0
kafka_debug=disable
kerberos_ccache_path=
kerberos_krb5_conf_path=/etc/krb5.conf
load_data_reserve_hours=4
load_error_log_limit_bytes=209715200
load_error_log_reserve_hours=48
load_process_max_memory_limit_percent=50
load_process_safe_mem_permit_percent=5
load_process_soft_mem_limit_percent=80
load_stream_eagain_wait_seconds=600
load_stream_flush_token_max_tasks=15
load_stream_max_buf_size=20971520
load_stream_max_wait_flush_token_time_ms=600000
load_stream_messages_in_batch=128
load_task_high_priority_threshold_second=120
local_exchange_buffer_mem_limit=134217728
log_buffer_level=
lookup_connection_cache_bytes_limit=4294967296
low_priority_compaction_score_threshold=200
low_priority_compaction_task_num_per_disk=2
make_snapshot_worker_count=5
max_amplified_read_ratio=0.8
max_base_compaction_threads=4
max_client_cache_size_per_host=10
max_consumer_num_per_group=3
max_cumu_compaction_threads=-1
max_depth_in_bkd_tree=32
max_depth_of_expr_tree=600
max_download_speed_kbps=50000
max_external_file_meta_cache_num=1000
max_fill_rate=2
max_fragment_start_wait_time_seconds=30
max_garbage_sweep_interval=3600
max_hdfs_file_handle_cache_num=1000
max_hdfs_file_handle_cache_time_sec=3600
max_memory_sink_batch_count=20
max_meta_checkpoint_threads=-1
max_percentage_of_error_disk=100
max_pushdown_conditions_per_column=1024
max_routine_load_thread_pool_size=1024
max_runnings_transactions_per_txn_map=2000
max_s3_client_retry=10
max_segment_num_per_rowset=1000
max_send_batch_parallelism_per_job=5
max_single_replica_compaction_threads=-1
max_sys_mem_available_low_water_mark_bytes=6871947673
max_tablet_io_errors=-1
max_tablet_migration_threads=1
max_tablet_version_num=2000
mem_limit=90%
mem_tracker_consume_min_size_bytes=1048576
memory_gc_sleep_time_ms=500
memory_limitation_per_thread_for_schema_change_bytes=2147483648
memory_limitation_per_thread_for_storage_migration_bytes=100000000
memory_maintenance_sleep_time_ms=100
memory_mode=moderate
memtable_flush_running_count_limit=2
memtable_hard_limit_active_percent=50
memtable_insert_memory_ratio=1.4
memtable_limiter_reserved_memory_bytes=838860800
memtable_mem_tracker_refresh_interval_ms=5
memtable_soft_limit_active_percent=50
merged_hdfs_min_io_size=8192
merged_oss_min_io_size=1048576
migration_lock_timeout_ms=1000
migration_remaining_size_threshold_mb=10
migration_task_timeout_secs=300
min_buffer_size=1024
min_bytes_in_scanner_queue=67108864
min_file_descriptor_number=60000
min_garbage_sweep_interval=180
min_load_rpc_timeout_ms=20000
min_row_group_size=134217728
min_tablet_migration_threads=1
mmap_threshold=134217728
mow_publish_max_discontinuous_version_num=20
multi_get_max_threads=10
multi_table_batch_plan_threshold=200
multi_table_max_wait_tables=5
nodechannel_pending_queue_max_bytes=67108864
num_broadcast_buffer=32
num_cores=0
num_disks=0
num_threads_per_disk=0
olap_table_sink_send_interval_auto_partition_factor=0.001
olap_table_sink_send_interval_microseconds=1000
open_load_stream_timeout_ms=60000
orc_natural_read_size_mb=8
ordered_data_compaction_min_segment_size=10485760
parquet_column_max_buffer_mb=8
parquet_header_max_size_mb=1
parquet_reader_max_buffer_size=50
parquet_rowgroup_max_buffer_mb=128
partition_disk_index_lru_size=10000
partition_topn_partition_threshold=1024
path_gc_check=1
path_gc_check_interval_second=86400
path_gc_check_step=1000
path_gc_check_step_interval_ms=10
pending_data_expire_time_sec=1800
pick_rowset_to_compact_interval_sec=86400
pipeline_executor_size=0
pipeline_status_report_interval=10
pipeline_task_leakage_detect_period_secs=60
pk_index_page_cache_stale_sweep_time_sec=600
pk_storage_page_cache_limit=10%
point_query_row_cache_stale_sweep_time_sec=300
pprof_profile_dir=/opt/apache-doris/be/log
pre_serialize_keys_limit_bytes=16777216
primary_key_data_page_size=32768
priority_networks=
priority_queue_remaining_tasks_increased_frequency=512
process_full_gc_size=10%
process_minor_gc_size=5%
public_access_ip=
publish_version_task_timeout_s=8
publish_version_worker_count=8
push_worker_count_high_priority=3
push_worker_count_normal_priority=3
query_cache_elasticity_size_mb=128
query_cache_max_partition_count=1024
query_cache_max_size_mb=256
query_statistics_reserve_timeout_ms=30000
read_size=8388608
release_snapshot_worker_count=5
remote_split_source_batch_size=10240
remote_storage_read_buffer_mb=16
remove_unused_remote_files_interval_sec=21600
report_disk_state_interval_seconds=60
report_query_statistics_interval_ms=3000
report_random_wait=1
report_tablet_interval_seconds=60
report_task_interval_seconds=10
result_buffer_cancelled_interval_time=300
rf_predicate_check_row_num=204800
rocksdb_max_write_buffer_number=5
routine_load_consumer_pool_size=1024
row_cache_mem_limit=20%
rpc_load_balancer=rr
s3_read_base_wait_time_ms=100
s3_read_max_wait_time_ms=800
s3_transfer_executor_pool_size=2
s3_write_buffer_size=5242880
s3_writer_buffer_allocation_timeout=300
scan_context_gc_interval_min=5
scan_thread_nice_value=0
schema_cache_capacity=1024
schema_cache_sweep_time_sec=100
segcompaction_batch_size=10
segcompaction_candidate_max_bytes=104857600
segcompaction_candidate_max_rows=1048576
segcompaction_num_threads=5
segcompaction_task_max_bytes=157286400
segcompaction_task_max_rows=1572864
segment_cache_capacity=-1
segment_cache_fd_percentage=40
segment_cache_memory_percentage=2
segment_compression_threshold_kb=256
send_batch_thread_pool_queue_size=102400
send_batch_thread_pool_thread_num=64
share_delta_writers=1
single_replica_load_download_num_workers=64
skip_loading_stale_rowset_meta=0
slave_replica_writer_rpc_timeout_sec=60
small_column_size_buffer=100
small_file_dir=/opt/apache-doris/be/lib/small_file/
snapshot_expire_time_sec=172800
soft_mem_limit_frac=0.9
spill_gc_interval_ms=2000
spill_gc_work_time_ms=2000
spill_io_thread_pool_queue_size=102400
spill_io_thread_pool_thread_num=48
spill_storage_limit=20%
spill_storage_root_path=
ssl_certificate_path=
ssl_private_key_path=
stacktrace_in_alloc_large_memory_bytes=2147483648
status_report_interval=5
storage_flood_stage_left_capacity_bytes=1073741824
storage_flood_stage_usage_percent=90
storage_medium_migrate_count=1
storage_page_cache_limit=20%
storage_page_cache_shard_size=256
storage_refresh_storage_policy_task_interval_seconds=5
storage_root_path=/opt/apache-doris/be/storage
storage_strict_check_incompatible_old_format=1
stream_load_record_batch_size=50
stream_load_record_expire_time_secs=28800
stream_tvf_buffer_size=1048576
streaming_load_json_max_mb=100
streaming_load_max_mb=10240
streaming_load_rpc_max_alive_time_sec=1200
string_type_length_soft_limit_bytes=1048576
sync_tablet_meta=0
sys_log_dir=
sys_log_level=INFO
sys_log_roll_mode=SIZE-MB-1024
sys_log_roll_num=10
sys_log_verbose_flags_v=-1
sys_log_verbose_level=10
sys_log_verbose_modules=
table_sink_non_partition_write_scaling_data_processed_threshold=26214400
table_sink_partition_write_max_partition_nums_per_writer=128
table_sink_partition_write_min_data_processed_rebalance_threshold=26214400
table_sink_partition_write_min_partition_data_processed_rebalance_threshold=15728640
tablet_lookup_cache_stale_sweep_time_sec=30
tablet_map_shard_size=256
tablet_meta_checkpoint_min_interval_secs=600
tablet_meta_checkpoint_min_new_rowsets_num=10
tablet_meta_serialize_size_limit=1610612736
tablet_path_check_batch_size=1000
tablet_path_check_interval_seconds=-1
tablet_publish_txn_max_thread=32
tablet_rowset_stale_sweep_by_size=0
tablet_rowset_stale_sweep_threshold_size=100
tablet_rowset_stale_sweep_time_sec=300
tablet_schema_cache_capacity=102400
tablet_schema_cache_recycle_interval=3600
tablet_version_graph_orphan_vertex_ratio=0.1
tablet_writer_ignore_eovercrowded=1
tablet_writer_open_rpc_timeout_sec=60
thread_wait_gc_max_milliseconds=1000
thrift_client_open_num_tries=1
thrift_client_retry_interval_ms=1000
thrift_connect_timeout_seconds=3
thrift_max_message_size=104857600
thrift_rpc_timeout_ms=60000
thrift_server_type_of_fe=THREAD_POOL
tmp_file_dir=tmp
total_permits_for_compaction_score=10000
transfer_large_data_by_brpc=1
trash_file_expire_time_sec=86400
txn_commit_rpc_timeout_ms=60000
txn_map_shard_size=1024
txn_shard_size=1024
unused_rowset_monitor_interval=30
update_replica_infos_interval_seconds=60
upload_worker_count=1
user_files_secure_path=/opt/apache-doris/be
user_function_dir=/opt/apache-doris/be/lib/udf
variant_enable_flatten_nested=0
variant_max_merged_tablet_schema_size=2048
variant_ratio_of_defaults_as_sparse_column=1
variant_threshold_rows_to_estimate_sparse_column=2048
variant_throw_exeception_on_invalid_json=0
vertical_compaction_max_row_source_memory_mb=200
vertical_compaction_max_segment_size=1073741824
vertical_compaction_num_columns_per_group=5
wait_internal_group_commit_finish=0
webserver_num_workers=48
webserver_port=8040
wg_flush_thread_num_per_store=6
wg_weighted_memory_ratio_refresh_interval_ms=50
workload_group_scan_task_wait_timeout_ms=10000
write_buffer_size=209715200
write_buffer_size_for_agg=419430400
zone_map_row_num_threshold=20