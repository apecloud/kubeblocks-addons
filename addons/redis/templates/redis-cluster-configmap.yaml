{{- range .Values.redisVersions }}
{{- $version := .major }}
{{- if eq .major "8" }}
  {{ $version = "7" }}
{{- end }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-cluster{{ .major }}-config-template
  labels:
    {{- include "redis.labels" $ | nindent 4 }}
data:
  redis.conf: |-
    {{- $.Files.Get (printf "config/redis-cluster%s-config.tpl" $version ) | nindent 4 }}
{{- end }}