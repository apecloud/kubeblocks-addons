apiVersion: apps.kubeblocks.io/v1
kind: ComponentVersion
metadata:
  name: hadoop
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
  annotations:
    {{- include "hadoop.annotations" . | nindent 4 }}
spec:
  compatibilityRules:
    - releases:
        - datanode-3.3.6
      compDefs:
        - hadoop-hdfs-datanode
    - releases:
        - namenode-3.3.6
      compDefs:
        - hadoop-hdfs-namenode
    - releases:
        - journalnode-3.3.6
      compDefs:
        - hadoop-hdfs-journalnode
    - releases:
        - nodemanager-3.3.6
      compDefs:
        - hadoop-yarn-nodemanager
    - releases:
        - resourcemanager-3.3.6
      compDefs:
        - hadoop-yarn-resourcemanager
  releases:
    - name: datanode-3.3.6
      serviceVersion: 3.3.6
      images:
        hdfs-datanode: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
        hadoop-common: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
    - name: namenode-3.3.6
      serviceVersion: 3.3.6
      images:
        hdfs-namenode: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
        hadoop-common: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
        roleProbe: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
    - name: journalnode-3.3.6
      serviceVersion: 3.3.6
      images:
        hdfs-journalnode: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
        hadoop-common: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
    - name: nodemanager-3.3.6
      serviceVersion: 3.3.6
      images:
        yarn-nodemanager: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
        hadoop-common: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
    - name: resourcemanager-3.3.6
      serviceVersion: 3.3.6
      images:
        yarn-resourcemanager: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
        hadoop-common: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}
        roleProbe: {{ .Values.images.registry }}/{{ .Values.images.hadoop.repository }}:{{ .Values.images.hadoop.tag }}