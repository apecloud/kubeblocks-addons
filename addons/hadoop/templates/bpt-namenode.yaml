apiVersion: dataprotection.kubeblocks.io/v1alpha1
kind: BackupPolicyTemplate
metadata:
  name: hadoop-hdfs-namenode
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  serviceKind: HadoopHDFS
  compDefs:
   - hdfs-namenode
  backupMethods:
    - name: rebuild
      snapshotVolumes: false
      actionSetName: hadfs-namenode-rebuild
      targetVolumes:
        volumeMounts:
        - name: metadata-dir
          mountPath: /hadoop
      env:
        - name: IMAGE_TAG
          valueFrom:
            versionMapping:
              - serviceVersions:
                  - "3.3.1"
                mappedValue: "3.3.1"
              - serviceVersions:
                  - "3.3.6"
                mappedValue: "3.3.6"