---
apiVersion: parameters.kubeblocks.io/v1alpha1
kind: ParametersDefinition
metadata:
  name: hadoop-hdfs-core-pd
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  fileName: core-site.xml
  parametersSchema:
    topLevelKey: HadoopCoreParameter
    cue: |-
      {{- $.Files.Get "config/config-core-constraint.cue" | nindent 6 }}
---
apiVersion: parameters.kubeblocks.io/v1alpha1
kind: ParametersDefinition
metadata:
  name: hadoop-hdfs-datanode-pd
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  fileName: hdfs-site.xml
  parametersSchema:
    topLevelKey: DataNodeParameter
    cue: |-
      {{- $.Files.Get "config/config-datanode-constraint.cue" | nindent 6 }}
  immutableParameters:
    - dfs.datanode.data.dir
    - dfs.datanode.http.address
    - dfs.datanode.ipc.address
    - dfs.datanode.address
    - dfs.nameservices
---
apiVersion: parameters.kubeblocks.io/v1alpha1
kind: ParametersDefinition
metadata:
  name: hadoop-hdfs-journalnode-pd
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  fileName: hdfs-site.xml
  parametersSchema:
    topLevelKey: JournalNodeParameter
    cue: |-
      {{- $.Files.Get "config/config-journalnode-constraint.cue" | nindent 6 }}
  immutableParameters:
    - dfs.journalnode.edits.dir
    - dfs.nameservices
    - dfs.journalnode.rpc-addres
    - dfs.journalnode.http-address
---
apiVersion: parameters.kubeblocks.io/v1alpha1
kind: ParametersDefinition
metadata:
  name: hadoop-hdfs-namenode-pd
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  fileName: hdfs-site.xml
  parametersSchema:
    topLevelKey: NameNodeParameter
    cue: |-
      {{- $.Files.Get "config/config-namenode-constraint.cue" | nindent 6 }}
  immutableParameters:
    - dfs.namenode.name.dir
    - dfs.nameservices
    - dfs.namenode.rpc-address
    - dfs.namenode.http-address
---
apiVersion: parameters.kubeblocks.io/v1alpha1
kind: ParametersDefinition
metadata:
  name: hadoop-yarn-nodemanager-pd
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  fileName: yarn-site.xml
  parametersSchema:
    topLevelKey: NodeManagerParameter
    cue: |-
      {{- $.Files.Get "config/config-nodemanager-constraint.cue" | nindent 6 }}
---
apiVersion: parameters.kubeblocks.io/v1alpha1
kind: ParametersDefinition
metadata:
  name: hadoop-yarn-resourcemanager-pd
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  fileName: yarn-site.xml
  parametersSchema:
    topLevelKey: ResourceManagerParameter
    cue: |-
      {{- $.Files.Get "config/config-resourcemanager-constraint.cue" | nindent 6 }}
---
apiVersion: parameters.kubeblocks.io/v1alpha1
kind: ParametersDefinition
metadata:
  name: hadoop-yarn-capacity-scheduler-pd
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  fileName: capacity-scheduler.xml
  parametersSchema:
    topLevelKey: CapacitySchedulerParameter
    cue: |-
      {{- $.Files.Get "config/config-capacity-scheduler-constraint.cue" | nindent 6 }}
---
apiVersion: parameters.kubeblocks.io/v1alpha1
kind: ParametersDefinition
metadata:
  name: hadoop-mapred-site-pd
  labels:
    {{- include "hadoop.labels" . | nindent 4 }}
spec:
  fileName: mapred-site.xml
  parametersSchema:
    topLevelKey: MapredSiteParameter
    cue: |-
      {{- $.Files.Get "config/config-mapred-site-constraint.cue" | nindent 6 }}