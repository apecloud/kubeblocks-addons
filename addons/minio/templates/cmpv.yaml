apiVersion: apps.kubeblocks.io/v1
kind: ComponentVersion
metadata:
  name: minio
  labels:
    {{- include "minio.labels" . | nindent 4 }}
  annotations:
    {{- include "minio.apiVersion" . | nindent 4 }}
spec:
  compatibilityRules:
    - releases:
      {{- range .Values.versions }}
        - {{ .serviceVersion }}
      {{- end }}
      compDefs:
        - {{ include "minio.cmpdRegexpPattern" . }}
  releases:
  {{- range .Values.versions }}
    - name: {{ .serviceVersion }}
      serviceVersion: {{ .serviceVersion }}
      images:
        minio: {{ $.Values.image.registry | default "docker.io" }}/{{ $.Values.image.repository }}:{{ .tag }}
        roleProbe: {{ $.Values.image.registry | default "docker.io" }}/{{ $.Values.image.repository }}:{{ .tag }}
        init: {{ $.Values.image.registry | default "docker.io" }}/apecloud/kubeblocks-tools:1.0.0
  {{- end }}
