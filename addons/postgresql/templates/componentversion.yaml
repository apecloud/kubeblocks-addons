apiVersion: apps.kubeblocks.io/v1alpha1
kind: ComponentVersion
metadata:
  name: postgresql
spec:
  compatibilityRules:
    - compDefs:
        - {{ include "postgresql.compDefPostgresql12" . }}
      releases:
        - 12.14.0
        - 12.14.1
        - 12.15.0
    - compDefs:
        - {{ include "postgresql.compDefPostgresql14" . }}
      releases:
        - 14.7.2
        - 14.8.0
    - compDefs:
        - {{ include "postgresql.compDefPostgresql15" . }}
      releases:
        - 15.7.0
  releases:
    - name: 12.14.0
      changes:
      serviceVersion: 12.14.0
      images:
        postgresql: {{ include "redis.image140" . }}
        pgbouncer: {{ include "pgbouncer.image" . }}
    - name: 12.14.1
      changes:
      serviceVersion: 12.14.1
      images:
        postgresql: {{ include "redis.image141" . }}
        pgbouncer: {{ include "pgbouncer.image" . }}
    - name: 12.15.0
      changes:
      serviceVersion: 12.15.0 # {{ .Values.componentServiceVersion.postgresql12  }}
      images:
        postgresql: {{ include "redis.image150" . }}
        pgbouncer: {{ include "pgbouncer.image" . }}
    - name: 14.7.2
      changes:
      serviceVersion: 14.7.2
      images:
        postgresql: {{ include "redis.image072" . }}
        pgbouncer: {{ include "pgbouncer.image" . }}
    - name: 14.8.0
      changes:
      serviceVersion: 14.8.0 # {{ .Values.componentServiceVersion.postgresql14  }}
      images:
        postgresql: {{ include "redis.image080" . }}
        pgbouncer: {{ include "pgbouncer.image" . }}
    - name: 15.7.0
      changes:
      serviceVersion: 15.7.0 # {{ .Values.componentServiceVersion.postgresql15  }}
      images:
        postgresql: {{ include "redis.image070" . }}
        pgbouncer: {{ include "pgbouncer.image" . }}
