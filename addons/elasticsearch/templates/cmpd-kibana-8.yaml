apiVersion: apps.kubeblocks.io/v1
kind: ComponentDefinition
metadata:
  name: {{ include "kibana8.cmpdName" . }}
  annotations:
    apps.kubeblocks.io/skip-immutable-check: "true"
    {{- include "elasticsearch.annotations" . | nindent 4 }}
  labels:
    {{- include "elasticsearch.labels" . | nindent 4 }}
spec:
  serviceVersion: 8.8.2
  configs:
  - name: kibana-cm
    template: {{ include "kibana8.configTplName" . }}
    namespace: {{ .Release.Namespace }}
    volumeName: kibana-cm
    restartOnFileChange: true
  {{ include "kibana.common" . | nindent 2 }}