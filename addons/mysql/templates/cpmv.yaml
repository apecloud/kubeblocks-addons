apiVersion: apps.kubeblocks.io/v1
kind: ComponentVersion
metadata:
  name: mysql
  labels:
    {{- include "mysql.labels" . | nindent 4 }}
  annotations:
    {{- include "mysql.apiVersion" . | nindent 4 }}
spec:
  compatibilityRules:
    - compDefs:
        - {{ include "mysql.componentDefName57" . }}
      releases:
        - 5.7.44
    - compDefs:
        - {{ include "mysql.componentDefName80" . }}
      releases:
        - 8.0.33
        - 8.0.34
        - 8.0.35
        - 8.0.36
        - 8.0.37
        - 8.0.38
        - 8.0.39
        - 8.0.41
        - 8.0.44
    - compDefs:
        - {{ include "mysql.componentDefName84" . }}
      releases:
        - 8.4.0
        - 8.4.1
        - 8.4.2
        - 8.4.3
        - 8.4.7
  releases:
    - name: 5.7.44
      serviceVersion: 5.7.44
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:5.7.44
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:5.7.44
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:5.7.44
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:2.4
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.33
      serviceVersion: 8.0.33
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.33
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.33
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.34
      serviceVersion: 8.0.34
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.34
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.34
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.35
      serviceVersion: 8.0.35
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.35
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.35
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.36
      serviceVersion: 8.0.36
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.36
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.36
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.37
      serviceVersion: 8.0.37
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.37
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.37
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.38
      serviceVersion: 8.0.38
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.38
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.38
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.39
      serviceVersion: 8.0.39
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.39
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.39
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.41
      serviceVersion: 8.0.41
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.41
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.41
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.0.44
      serviceVersion: 8.0.44
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.44
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.44
        init-data: {{ .Values.image.registry | default "docker.io" }}/apecloud/mysql_audit_log:8.0.33
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.0
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.4.0
      serviceVersion: 8.4.0
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.0
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.0
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.4
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.4.1
      serviceVersion: 8.4.1
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.1
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.1
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.4
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.4.2
      serviceVersion: 8.4.2
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.2
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.2
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.4
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.4.3
      serviceVersion: 8.4.3
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.3
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.3
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.4
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
    - name: 8.4.7
      serviceVersion: 8.4.7
      images:
        mysql: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.7
        accountProvision: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.4.7
        init-xtrabackup: {{ .Values.image.registry | default "docker.io" }}/apecloud/xtrabackup:8.4
        {{- include "mysql.spec.runtime.images" . | nindent 8 }}
