apiVersion: apps.kubeblocks.io/v1
kind: ClusterDefinition
metadata:
  name: starrocks
  labels:
    {{- include "starrocks.labels" . | nindent 4 }}
  annotations:
    {{- include "starrocks.apiVersion" . | nindent 4 }}
spec:
  topologies:
  - name: shared-nothing
    components:
    - name: fe
      compDef: {{ include "fe-shared-nothing.cmpdRegexPattern" . }}
    - name: be
      compDef: {{ include "be.cmpdRegexPattern" . }}
    orders:
      provision:
      - fe
      - be
      terminate:
      - be
      - fe
  - name: shared-data
    components:
    - name: fe
      compDef: {{ include "fe-shared-data.cmpdRegexPattern" . }}
    - name: cn
      compDef: {{ include "cn.cmpdRegexPattern" . }}
      template: true
    orders:
      provision:
      - fe
      - cn
      terminate:
      - cn
      - fe
    default: true
