apiVersion: apps.kubeblocks.io/v1alpha1
kind: ComponentVersion
metadata:
  name: mongodb-shard
  labels:
    {{- include "mongodb.labels" . | nindent 4 }}
spec:
  compatibilityRules:
    - compDefs:
        - {{ include "mongodbShard.componentDefName" . }}
      releases:
        - 8.0.8
        - 7.0.18
        - 6.0.21
        - 5.0.29
        - 4.4.29
        - 4.2.25
        - 4.0.28
    - compDefs:
        - {{ include "cfgServer.componentDefName" . }}
      releases:
        - 8.0.8
        - 7.0.18
        - 6.0.21
        - 5.0.29
        - 4.4.29
        - 4.2.25
        - 4.0.28
  releases:
    - name: 8.0.8
      changes:
      serviceVersion: 8.0.8
      images:
        mongodb: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.8
        init-syncer: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.syncer.repository }}:{{ .Values.image.syncer.tag }}
    - name: 7.0.18
      changes:
      serviceVersion: 7.0.18
      images:
        mongodb: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:7.0.18
        init-syncer: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.syncer.repository }}:{{ .Values.image.syncer.tag }}
    - name: 6.0.21
      changes:
      serviceVersion: 6.0.21
      images:
        mongodb: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:6.0.21
        init-syncer: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.syncer.repository }}:{{ .Values.image.syncer.tag }}
    - name: 5.0.29
      changes:
      serviceVersion: 5.0.29
      images:
        mongodb: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:5.0.29
        init-syncer: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.syncer.repository }}:{{ .Values.image.syncer.tag }}
    - name: 4.4.29
      changes:
      serviceVersion: 4.4.29
      images:
        mongodb: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.4.29
        init-syncer: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.syncer.repository }}:{{ .Values.image.syncer.tag }}
    - name: 4.2.25
      changes:
      serviceVersion: 4.2.25
      images:
        mongodb: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.2.25
        init-syncer: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.syncer.repository }}:{{ .Values.image.syncer.tag }}
    - name: 4.0.28
      changes:
      serviceVersion: 4.0.28
      images:
        mongodb: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.0.28
        init-syncer: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.syncer.repository }}:{{ .Values.image.syncer.tag }}
---

apiVersion: apps.kubeblocks.io/v1alpha1
kind: ComponentVersion
metadata:
  name: mongos
  labels:
    {{- include "mongodb.labels" . | nindent 4 }}
spec:
  compatibilityRules:
    - compDefs:
        - {{ include "mongos.componentDefName" . }}
      releases:
        - 8.0.8
        - 7.0.18
        - 6.0.21
        - 5.0.29
        - 4.4.29
        - 4.2.25
        - 4.0.28
  releases:
    - name: 8.0.8
      changes:
      serviceVersion: 8.0.8
      images:
        mongos: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:8.0.8
    - name: 7.0.18
      changes:
      serviceVersion: 7.0.18
      images:
        mongos: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:7.0.18
    - name: 6.0.21
      changes:
      serviceVersion: 6.0.21
      images:
        mongos: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:6.0.21
    - name: 5.0.29
      changes:
      serviceVersion: 5.0.29
      images:
        mongos: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:5.0.29
    - name: 4.4.29
      changes:
      serviceVersion: 4.4.29
      images:
        mongos: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.4.29
    - name: 4.2.25
      changes:
      serviceVersion: 4.2.25
      images:
        mongos: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.2.25
    - name: 4.0.28
      changes:
      serviceVersion: 4.0.28
      images:
        mongos: {{ .Values.image.registry | default "docker.io" }}/{{ .Values.image.repository }}:4.0.28