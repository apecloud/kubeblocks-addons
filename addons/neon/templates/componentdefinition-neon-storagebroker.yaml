apiVersion: apps.kubeblocks.io/v1alpha1
kind: ComponentDefinition
metadata:
  labels:
    {{- include "neon.labels" . | nindent 4 }}
  name: {{ include "neon-storagebroker.componentDefName" . }}
spec:
  description: A neon storagebroker component definition for Kubernetes
  provider: KubeBlocks
  runtime:
    containers:
    - command:
      - storage_broker
      - -l
      - 0.0.0.0:50051
      image: {{ include "neon-storagebroker.image" . }}
      name: neon-storbroker
      volumeMounts:
      - mountPath: /usr/local/neon/storagebroker
        name: neon-storbroker
  serviceKind: neon-storbroker
  serviceVersion: {{ .Values.componentServiceVersion }}
