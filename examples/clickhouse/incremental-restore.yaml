apiVersion: apps.kubeblocks.io/v1alpha1
kind: Cluster
metadata:
  name: ch-cluster-restore-inc
  namespace: default
  annotations:
    kubeblocks.io/restore-from-backup: '{"clickhouse":{"name":"clickhouse-incremental-backup","namespace":"default","volumeRestorePolicy":"Parallel"}}'
spec:
  terminationPolicy: Delete
  componentSpecs:
    - name: ch-keeper
      componentDef: ch-keeper-25
      replicas: 1
      resources:
        limits:
          cpu: "0.5"
          memory: 1Gi
        requests:
          cpu: "0.5"
          memory: 1Gi
  shardingSpecs:
    - name: clickhouse
      shards: 2
      template:
        name: clickhouse
        componentDef: clickhouse-25
        replicas: 2
        resources:
          limits:
            cpu: "0.5"
            memory: 1Gi
          requests:
            cpu: "0.5"
            memory: 1Gi
