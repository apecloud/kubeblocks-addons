{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "replicas": {
      "type": "object",
      "properties": {
        "hmaster": { "type": "integer", "default": 1, "minimum": 1, "maximum": 1024 },
        "hregionserver": { "type": "integer", "default": 1, "minimum": 1, "maximum": 1024 }
      },
      "required": ["hmaster", "hregionserver"],
      "description": "Number of replicas for each component."
    },
    "resources": {
      "type": "object",
      "properties": {
        "hmaster": { "$ref": "#/definitions/resourceSchema" },
        "hregionserver": { "$ref": "#/definitions/resourceSchema" }
      },
      "required": ["hmaster", "hregionserver"],
      "description": "Resource requests and limits for each component."
    },
    "storage": {
      "type": "object",
      "properties": {
        "hbaseLog": { "type": "string", "default": "2Gi" },
        "hbaseTempData": { "type": "string", "default": "10Gi" }
      },
      "required": ["hbaseLog", "hbaseTempData"],
      "description": "Storage requirements for each component."
    },
    "terminationPolicy": {
      "type": "string",
      "default": "Delete",
      "description": "Policy for terminating the release."
    },
    "clusterDef": {
      "type": "string",
      "default": "hbase",
      "description": "Reference to the cluster definition."
    },
    "topology": {
      "type": "string",
      "default": "hbase-cluster",
      "description": "Cluster topology configuration."
    },
    "hadoopCluster": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "default": "hadoopcluster",
          "description": "Name of the linked Hadoop cluster namespace."
        }
      }
    }
  },
  "required": ["replicas", "resources", "storage", "terminationPolicy", "clusterDef", "topology", "hadoopCluster"],
  "definitions": {
    "resourceSchema": {
      "type": "object",
      "properties": {
        "requests": {
          "type": "object",
          "properties": {
            "cpu": { "type": "string", "default": "0.1" },
            "memory": { "type": "string", "default": "0.5Gi" }
          },
          "required": ["cpu", "memory"],
          "description": "Resource requests for the component."
        },
        "limits": {
          "type": "object",
          "properties": {
            "cpu": { "type": "string", "default": "1" },
            "memory": { "type": "string", "default": "2Gi" }
          },
          "required": ["cpu", "memory"],
          "description": "Resource limits for the component."
        }
      },
      "required": ["requests", "limits"],
      "description": "Resource configuration for a component."
    }
  },
  "description": "Schema for HBase Helm chart values."
}
