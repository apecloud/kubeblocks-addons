{{- if eq .Values.mode "cluster" }}
  {{- /* TODO: when clusterDefinition topology supports sharding, migrate the cluster mode to topology as well */ -}}
  {{- include "falkordb-cluster.clusterCommon" . }}
  clusterDef: falkordb
  topology: {{ .Values.mode }}
  shardings:
  {{- include "falkordb-cluster.shardingSpec" . | indent 2 }}
{{- else }}
  {{- include "falkordb-cluster.clusterCommon" . }}
  clusterDef: falkordb
  topology: {{ .Values.mode }}
  componentSpecs:
  {{- if eq .Values.mode "replication" }}
    {{- include "falkordb-cluster.componentSpec" . | indent 2 }}
    {{- include "falkordb-cluster.sentinelComponentSpec" . | indent 2 }}
  {{- else }}
    {{- include "falkordb-cluster.componentSpec" . | indent 2 }}
  {{- end }}
{{- end }}
