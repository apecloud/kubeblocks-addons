{{- if .Values.tls.enabled }}
{{- $elasticPassword := randAlphaNum 16 }}
{{- $kibanaPassword := randAlphaNum 16 }}
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: {{ include "elasticAccountSecretname" . }}
  namespace: {{ .Release.Namespace | quote }}
  labels: {{- include "elasticsearch-cluster.labels" . | nindent 4 }}
data:
  password: {{ $elasticPassword | b64enc }}
  username: {{ "elastic" | b64enc }}

---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: {{ include "kibanaAccountSecretname" . }}
  namespace: {{ .Release.Namespace | quote }}
  labels: {{- include "elasticsearch-cluster.labels" . | nindent 4 }}
data:
  password: {{ $kibanaPassword | b64enc }}
  username: {{ "kibana_system" | b64enc }}
{{- end }}
