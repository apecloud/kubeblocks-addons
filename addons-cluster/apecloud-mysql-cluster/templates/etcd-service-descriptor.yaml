{{- if and (eq .Values.mode "raftGroup") .Values.proxyEnabled }}
apiVersion: apps.kubeblocks.io/v1alpha1
kind: ServiceDescriptor
metadata:
  name: {{ include "kblib.clusterName" . }}-etcd-descriptor
  namespace: {{ .Release.Namespace }}
spec:
  serviceKind: etcd
  serviceVersion: {{ .Values.etcd.serviceVersion }}
  endpoint:
    {{- if .Values.localEtcd }}
    value: {{ include "kblib.clusterName" . }}-etcd-headless.default.svc.cluster.local:2379
    {{- else }}
    value: {{ .Values.etcd.serviceReference.endpoint }}
    {{- end }}
{{- end -}}